{% extends 'base.html' %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Chart.js CDN -->

<!-- Main content -->
<main class="flex-grow p-6 overflow-auto">
    <h1 class="text-3xl font-bold mb-6">Dashboard</h1>

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8">
        <!-- Today's Sales Card -->
        <div class="card bg-base-100 shadow p-4 border-l-4 border-green-500">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-lg font-semibold mb-2">Today's Sales</h2>
                    <p class="text-3xl font-bold text-green-600">Rs. 45,250</p>
                    <p class="text-sm text-green-500 mt-1">+12.5% from yesterday</p>
                </div>
                <div class="text-green-500 text-3xl">üìà</div>
            </div>
        </div>

        <!-- Total Orders Card -->
        <div class="card bg-base-100 shadow p-4 border-l-4 border-blue-500">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-lg font-semibold mb-2">Total Orders</h2>
                    <p class="text-3xl font-bold text-blue-600">127</p>
                    <p class="text-sm text-blue-500 mt-1">+8.3% from yesterday</p>
                </div>
                <div class="text-blue-500 text-3xl">üõí</div>
            </div>
        </div>

        <!-- Low Stock Items Card -->
        <div class="card bg-base-100 shadow p-4 border-l-4 border-orange-500">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-lg font-semibold mb-2">Low Stock Items</h2>
                    <p class="text-3xl font-bold text-orange-600">23</p>
                    <p class="text-sm text-orange-500 mt-1">‚ö†Ô∏è Needs attention</p>
                </div>
                <div class="text-orange-500 text-3xl">üì¶</div>
            </div>
        </div>

        <!-- Total Products Card -->
        <div class="card bg-base-100 shadow p-4 border-l-4 border-purple-500">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-lg font-semibold mb-2">Total Products</h2>
                    <p class="text-3xl font-bold text-purple-600">1,847</p>
                    <p class="text-sm text-gray-500 mt-1">üìã Active inventory</p>
                </div>
                <div class="text-purple-500 text-3xl">üè™</div>
            </div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        <!-- Daily Sales Line Chart -->
        <div class="card bg-base-100 shadow p-4">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold">Daily Sales (Last 7 Days)</h2>
                <select class="select select-bordered select-sm">
                    <option>Last 7 Days</option>
                    <option>Last 30 Days</option>
                    <option>Last 3 Months</option>
                </select>
            </div>
            <canvas id="dailySalesChart" width="400" height="250"></canvas>
        </div>

        <!-- Sales by Category Pie Chart -->
        <div class="card bg-base-100 shadow p-4">
            <h2 class="text-xl font-semibold mb-4">Sales by Category</h2>
            <canvas id="categorySalesChart" width="400" height="250"></canvas>
        </div>
    </div>

    <!-- Additional Charts and Stats -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Payment Methods Chart -->
        <div class="card bg-base-100 shadow p-4">
            <h2 class="text-xl font-semibold mb-4">Payment Methods</h2>
            <canvas id="paymentMethodsChart" width="400" height="200"></canvas>
        </div>

        <!-- Top Selling Products -->
        <div class="card bg-base-100 shadow p-4">
            <h2 class="text-xl font-semibold mb-4">Top Selling Products</h2>
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-medium">Premium Coffee Beans</p>
                        <p class="text-sm text-gray-600">45 units sold</p>
                    </div>
                    <span class="text-green-600 font-bold">Rs. 6,750</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-medium">Organic Tea Blend</p>
                        <p class="text-sm text-gray-600">38 units sold</p>
                    </div>
                    <span class="text-green-600 font-bold">Rs. 4,560</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-medium">Artisan Chocolates</p>
                        <p class="text-sm text-gray-600">32 units sold</p>
                    </div>
                    <span class="text-green-600 font-bold">Rs. 3,840</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-medium">Fresh Pastries</p>
                        <p class="text-sm text-gray-600">29 units sold</p>
                    </div>
                    <span class="text-green-600 font-bold">Rs. 2,900</span>
                </div>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="card bg-base-100 shadow p-4">
            <h2 class="text-xl font-semibold mb-4">Recent Transactions</h2>
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 border-l-4 border-green-500 bg-green-50 rounded">
                    <div>
                        <p class="font-medium">#TXN-001234</p>
                        <p class="text-sm text-gray-600">2 items ‚Ä¢ Cash</p>
                    </div>
                    <span class="text-green-600 font-bold">Rs. 850</span>
                </div>
                <div class="flex items-center justify-between p-3 border-l-4 border-blue-500 bg-blue-50 rounded">
                    <div>
                        <p class="font-medium">#TXN-001235</p>
                        <p class="text-sm text-gray-600">5 items ‚Ä¢ Card</p>
                    </div>
                    <span class="text-blue-600 font-bold">Rs. 1,250</span>
                </div>
                <div class="flex items-center justify-between p-3 border-l-4 border-purple-500 bg-purple-50 rounded">
                    <div>
                        <p class="font-medium">#TXN-001236</p>
                        <p class="text-sm text-gray-600">3 items ‚Ä¢ UPI</p>
                    </div>
                    <span class="text-purple-600 font-bold">Rs. 675</span>
                </div>
                <div class="flex items-center justify-between p-3 border-l-4 border-orange-500 bg-orange-50 rounded">
                    <div>
                        <p class="font-medium">#TXN-001237</p>
                        <p class="text-sm text-gray-600">1 item ‚Ä¢ Cash</p>
                    </div>
                    <span class="text-orange-600 font-bold">Rs. 320</span>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Chart.js Script -->
<script>
    // Daily Sales Line Chart
    const dailySalesCtx = document.getElementById('dailySalesChart').getContext('2d');
    const dailySalesChart = new Chart(dailySalesCtx, {
        type: 'line',
        data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
                label: 'Daily Sales (Rs.)',
                data: [32000, 28000, 35000, 42000, 38000, 45000, 41000],
                borderColor: '#22c55e',
                backgroundColor: 'rgba(34, 197, 94, 0.1)',
                tension: 0.4,
                fill: true
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            },
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });

    // Sales by Category Doughnut Chart
    const categorySalesCtx = document.getElementById('categorySalesChart').getContext('2d');
    const categorySalesChart = new Chart(categorySalesCtx, {
        type: 'doughnut',
        data: {
            labels: ['Beverages', 'Snacks', 'Dairy', 'Bakery', 'Electronics', 'Others'],
            datasets: [{
                label: 'Sales %',
                data: [35, 20, 15, 12, 10, 8],
                backgroundColor: [
                    '#3b82f6',  // blue-500
                    '#ef4444',  // red-500
                    '#fbbf24',  // yellow-400
                    '#8b5cf6',  // purple-500
                    '#10b981',  // emerald-500
                    '#f97316'   // orange-500
                ]
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });

    // Payment Methods Bar Chart
    const paymentMethodsCtx = document.getElementById('paymentMethodsChart').getContext('2d');
    const paymentMethodsChart = new Chart(paymentMethodsCtx, {
        type: 'bar',
        data: {
            labels: ['Cash', 'Card', 'UPI', 'Wallet'],
            datasets: [{
                label: 'Transactions',
                data: [45, 35, 30, 17],
                backgroundColor: [
                    '#22c55e',  // green-500
                    '#3b82f6',  // blue-500
                    '#8b5cf6',  // purple-500
                    '#f59e0b'   // amber-500
                ]
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            },
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });
</script>
{% endblock content %}